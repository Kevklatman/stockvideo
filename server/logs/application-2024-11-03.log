{"level":"info","message":"Starting payment intent creation","operation":"createPaymentIntent","timestamp":"2024-11-03 10:36:13","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"3459bf3d-30c7-4e70-9b5f-b1f74ff83958"}
{"error":{"purchaseId":"f31f350e-caf5-438c-aa7b-61e9b4269c01"},"level":"error","message":"Purchase already in progress","operation":"createPaymentIntent","timestamp":"2024-11-03 10:36:13","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"3459bf3d-30c7-4e70-9b5f-b1f74ff83958"}
{"error":{"error":{"message":"Purchase already in progress","name":"PaymentError","stack":"PaymentError: Purchase already in progress\n    at /Users/kevinklatman/Development/Code/stockvideo/server/src/services/payment.service.ts:112:17\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async EntityManager.transaction (/Users/kevinklatman/Development/Code/stockvideo/server/node_modules/src/entity-manager/EntityManager.ts:154:28)\n    at async Function.createPaymentIntent (/Users/kevinklatman/Development/Code/stockvideo/server/src/services/payment.service.ts:60:14)\n    at async createPaymentIntent (/Users/kevinklatman/Development/Code/stockvideo/server/src/controllers/payment.controller.ts:33:29)"}},"level":"error","message":"Payment intent creation failed","operation":"createPaymentIntent","timestamp":"2024-11-03 10:36:13","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"3459bf3d-30c7-4e70-9b5f-b1f74ff83958"}
{"level":"info","message":"Starting payment intent creation","operation":"createPaymentIntent","timestamp":"2024-11-03 10:36:56","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"7cab8dda-6c9e-4901-8883-46ea478da582"}
{"level":"info","message":"Purchase record created","operation":"createPaymentIntent","purchaseId":"9c724e21-78bb-4a5d-8efd-101cbf2d0468","timestamp":"2024-11-03 10:36:56","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"7cab8dda-6c9e-4901-8883-46ea478da582"}
{"error":{"error":{"message":"The parameter `return_url` cannot be passed when creating a PaymentIntent unless `confirm` is set to true.","name":"Error","stack":"Error: The parameter `return_url` cannot be passed when creating a PaymentIntent unless `confirm` is set to true.\n    at Function.generate (/Users/kevinklatman/Development/Code/stockvideo/server/node_modules/stripe/cjs/Error.js:10:20)\n    at res.toJSON.then.Error_js_1.StripeAPIError.message (/Users/kevinklatman/Development/Code/stockvideo/server/node_modules/stripe/cjs/RequestSender.js:105:54)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"level":"error","message":"Payment intent creation failed","operation":"createPaymentIntent","timestamp":"2024-11-03 10:36:56","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"7cab8dda-6c9e-4901-8883-46ea478da582"}
{"level":"info","message":"Starting payment intent creation","operation":"createPaymentIntent","timestamp":"2024-11-03 10:40:26","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"7cab8dda-6c9e-4901-8883-46ea478da582"}
{"level":"info","message":"Purchase record created","operation":"createPaymentIntent","purchaseId":"043f6061-8055-4639-80ff-13dbdbd346aa","timestamp":"2024-11-03 10:40:26","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"7cab8dda-6c9e-4901-8883-46ea478da582"}
{"error":{"error":{"message":"The parameter `return_url` cannot be passed when creating a PaymentIntent unless `confirm` is set to true.","name":"Error","stack":"Error: The parameter `return_url` cannot be passed when creating a PaymentIntent unless `confirm` is set to true.\n    at Function.generate (/Users/kevinklatman/Development/Code/stockvideo/server/node_modules/stripe/cjs/Error.js:10:20)\n    at res.toJSON.then.Error_js_1.StripeAPIError.message (/Users/kevinklatman/Development/Code/stockvideo/server/node_modules/stripe/cjs/RequestSender.js:105:54)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"level":"error","message":"Payment intent creation failed","operation":"createPaymentIntent","timestamp":"2024-11-03 10:40:27","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"7cab8dda-6c9e-4901-8883-46ea478da582"}
{"level":"info","message":"Starting payment intent creation","operation":"createPaymentIntent","timestamp":"2024-11-03 10:43:04","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"7cab8dda-6c9e-4901-8883-46ea478da582"}
{"level":"info","message":"Purchase record created","operation":"createPaymentIntent","purchaseId":"4574e201-34c0-4696-a689-a7e3c4bfed74","timestamp":"2024-11-03 10:43:04","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"7cab8dda-6c9e-4901-8883-46ea478da582"}
{"error":{"error":{"message":"Can only apply an application_fee_amount when the PaymentIntent is attempting a direct payment (using an OAuth key or Stripe-Account header) or destination payment (using `transfer_data[destination]`).","name":"Error","stack":"Error: Can only apply an application_fee_amount when the PaymentIntent is attempting a direct payment (using an OAuth key or Stripe-Account header) or destination payment (using `transfer_data[destination]`).\n    at Function.generate (/Users/kevinklatman/Development/Code/stockvideo/server/node_modules/stripe/cjs/Error.js:10:20)\n    at res.toJSON.then.Error_js_1.StripeAPIError.message (/Users/kevinklatman/Development/Code/stockvideo/server/node_modules/stripe/cjs/RequestSender.js:105:54)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"}},"level":"error","message":"Payment intent creation failed","operation":"createPaymentIntent","timestamp":"2024-11-03 10:43:04","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"7cab8dda-6c9e-4901-8883-46ea478da582"}
{"level":"info","message":"Starting payment intent creation","operation":"createPaymentIntent","timestamp":"2024-11-03 10:45:18","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"7cab8dda-6c9e-4901-8883-46ea478da582"}
{"level":"info","message":"Purchase record created","operation":"createPaymentIntent","purchaseId":"af55f45c-4b49-4fed-bd39-ef94d1b7acff","timestamp":"2024-11-03 10:45:18","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"7cab8dda-6c9e-4901-8883-46ea478da582"}
{"level":"info","message":"Payment intent created successfully","operation":"createPaymentIntent","paymentIntentId":"pi_3QH7rXRp6s2wyKm70huGjOGI","purchaseId":"af55f45c-4b49-4fed-bd39-ef94d1b7acff","timestamp":"2024-11-03 10:45:19","userId":"3da68182-3e66-4c03-b9e9-5cea859d090d","videoId":"7cab8dda-6c9e-4901-8883-46ea478da582"}
